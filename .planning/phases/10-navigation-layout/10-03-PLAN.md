---
phase: 10-navigation-layout
plan: 03
type: execute
domain: frontend
---

<objective>
Update mobile navigation with project sections and polish overall layout consistency.

Purpose: Bring mobile navigation to parity with enhanced desktop sidebar and refine page layout polish.
Output: Mobile nav with project sections, improved spacing consistency across all pages.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior plans:**
@.planning/phases/10-navigation-layout/10-01-SUMMARY.md
@.planning/phases/10-navigation-layout/10-02-SUMMARY.md

**Key files:**
@components/layout/mobile-nav.tsx
@components/layout/page-header.tsx
@app/globals.css

**Established patterns:**
- Sheet component for mobile nav drawer
- Section navigation via query params
- Dark sidebar theme
- Sidebar sections pattern from 10-01
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add project sections to mobile navigation</name>
  <files>components/layout/mobile-nav.tsx</files>
  <action>
    Mirror the desktop sidebar enhancement from 10-01:

    1. Import useSearchParams in addition to usePathname
    2. Detect project context from pathname (/projects/[id] pattern)
    3. When on a project page, show project sections below main nav:
       - Add visual separator (border-t with muted color)
       - Add project name header (small, muted, truncated)
       - List section links: Uploads, Cards, Epics, Stories, Subtasks, Runs
    4. Section links format: /projects/${projectId}?section=${section}
    5. Active section highlighting based on searchParams
    6. Close sheet when any section link is clicked (already has onClick={() => setOpen(false)})

    7. Visual styling for sections in mobile:
       - Full width items (not indented - more thumb-friendly)
       - Same 44px min-height as main nav items
       - Slightly smaller icon (h-4 w-4) to differentiate from main nav

    AVOID: Duplicating navItems array - create a shared constant or extract to separate file if needed.
  </action>
  <verify>
    1. On mobile viewport (< 768px):
       - Visit /projects - menu shows only Projects and Runs
       - Visit /projects/[id] - menu shows Projects, Runs, separator, project name, and section links
       - Click section link - menu closes, page updates
  </verify>
  <done>
    - Mobile nav shows project sections when viewing a project
    - Section links work and close the drawer
    - Visual consistency with desktop sidebar
  </done>
</task>

<task type="auto">
  <name>Task 2: Polish page layout spacing</name>
  <files>app/projects/page.tsx, app/projects/[id]/page.tsx, app/runs/page.tsx</files>
  <action>
    Ensure consistent spacing across all pages:

    1. Verify PageHeader padding is consistent (px-6 py-5)
    2. Content area should use p-6 consistently
    3. max-w-7xl mx-auto wrapper on all pages
    4. space-y-6 between major sections within content

    Check and fix if needed:
    - /projects page
    - /projects/[id] page
    - /runs page

    Also check:
    - Remove redundant wrapper divs if any
    - Ensure min-h-screen on outer container

    AVOID: Changing visual design - this is spacing consistency only.
  </action>
  <verify>
    - All three pages have identical outer structure
    - Spacing feels consistent when navigating between pages
    - No horizontal scroll on any viewport
  </verify>
  <done>
    - Consistent page layout structure across all pages
    - Proper responsive behavior maintained
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Mobile navigation with project sections and layout polish</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open browser DevTools, toggle mobile viewport (375px width)
    3. Visit: /projects - open menu, confirm only Projects and Runs shown
    4. Click a project
    5. Open menu - confirm project sections appear below main nav with separator
    6. Test: Click each section link - menu closes, content updates
    7. Toggle back to desktop viewport
    8. Navigate between /projects, /projects/[id], /runs
    9. Confirm: Spacing feels consistent, no jarring layout shifts
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] Mobile nav shows project sections contextually
- [ ] Section links work on mobile
- [ ] Layout spacing is consistent across pages
- [ ] No TypeScript errors
- [ ] Phase 10 complete - navigation and layout overhauled
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Mobile nav matches desktop functionality
- Consistent page layouts
- User confirmed visual verification
- Phase 10: Navigation & Layout complete
</success_criteria>

<output>
After completion, create `.planning/phases/10-navigation-layout/10-03-SUMMARY.md`:

# Phase 10 Plan 3: Mobile Nav & Layout Polish Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- [List with descriptions]

## Decisions Made

[Key decisions or "None"]

## Issues Encountered

[Problems and resolutions or "None"]

## Next Phase Readiness

Phase 10 complete. Ready for Phase 11: Data Display & Hierarchy.
</output>
