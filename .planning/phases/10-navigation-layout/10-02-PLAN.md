---
phase: 10-navigation-layout
plan: 02
type: execute
domain: frontend
---

<objective>
Create breadcrumb navigation component and integrate into page headers for clear location context.

Purpose: Replace the simple back button with a full breadcrumb trail showing hierarchical location (Projects > Project Name > Section).
Output: Reusable breadcrumb component integrated into PageHeader.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONVENTIONS.md

**Prior plan:**
@.planning/phases/10-navigation-layout/10-01-SUMMARY.md (read for any patterns established)

**Key files:**
@components/layout/page-header.tsx
@app/projects/page.tsx
@app/projects/[id]/page.tsx
@app/runs/page.tsx
@app/runs/[id]/page.tsx

**Established patterns:**
- PageHeader component with backHref/backLabel props
- kebab-case file naming
- Lucide icons (ChevronRight for separators)
- Text truncation for long names

**shadcn/ui note:** shadcn has a breadcrumb component but it's heavy. Prefer lightweight custom implementation.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create breadcrumb component</name>
  <files>components/layout/breadcrumb.tsx</files>
  <action>
    Create a new breadcrumb component with:

    1. Interface:
       ```typescript
       interface BreadcrumbItem {
         label: string;
         href?: string; // Optional - last item has no href
       }

       interface BreadcrumbProps {
         items: BreadcrumbItem[];
         className?: string;
       }
       ```

    2. Implementation:
       - Map items to links with ChevronRight separators
       - Last item renders as plain text (current location)
       - Use text-sm font size, muted color for links
       - Active item (last) uses foreground color
       - Links use hover:underline style
       - Truncate long labels with max-w-[200px] truncate
       - Home icon (optional) before first item - skip for now, keep minimal

    3. Accessibility:
       - nav element with aria-label="Breadcrumb"
       - ol/li structure for proper semantics
       - aria-current="page" on last item

    AVOID: Over-engineering with animations or complex hover states. Keep it minimal and functional.
  </action>
  <verify>
    - Component exports properly
    - TypeScript types are correct
    - No console errors when imported
  </verify>
  <done>
    - Breadcrumb component created in components/layout/
    - Follows project naming and styling conventions
    - Accessible with proper ARIA attributes
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate breadcrumbs into PageHeader</name>
  <files>components/layout/page-header.tsx</files>
  <action>
    1. Add optional breadcrumbs prop to PageHeader:
       ```typescript
       breadcrumbs?: Array<{ label: string; href?: string }>;
       ```

    2. When breadcrumbs provided:
       - Render Breadcrumb component above the title
       - Remove the back button (breadcrumbs replace it)
       - Adjust spacing: breadcrumbs get py-2, title section gets reduced top padding

    3. When breadcrumbs NOT provided:
       - Keep existing behavior (back button if backHref provided)
       - This maintains backward compatibility

    4. Layout when breadcrumbs present:
       ```
       [Breadcrumb: Projects > Project Name > Uploads]
       [Title Row: "Project Name" .................. [Actions]]
       ```

    AVOID: Breaking existing pages that use backHref. Both patterns should work.
  </action>
  <verify>
    - Pages without breadcrumbs prop still work (backward compatible)
    - Pages with breadcrumbs show trail above title
    - Back button hidden when breadcrumbs provided
  </verify>
  <done>
    - PageHeader supports both backHref and breadcrumbs patterns
    - Backward compatibility maintained
    - Clean visual hierarchy when breadcrumbs used
  </done>
</task>

<task type="auto">
  <name>Task 3: Add breadcrumbs to project pages</name>
  <files>app/projects/[id]/page.tsx</files>
  <action>
    1. Import Breadcrumb from components/layout/breadcrumb

    2. Build breadcrumb items based on current state:
       - Base: [{ label: "Projects", href: "/projects" }]
       - Project: [{ label: project.name }] when no section selected
       - Section: [{ label: project.name, href: `/projects/${id}` }, { label: sectionLabel }]

    3. Update PageHeader usage:
       - Remove backHref="/projects" and backLabel
       - Add breadcrumbs={breadcrumbItems}

    4. Section labels (capitalize): "Uploads", "Cards", "Epics", "Stories", "Subtasks", "Runs"

    AVOID: Duplicating breadcrumb logic. Build items once and pass to PageHeader.
  </action>
  <verify>
    1. Visit /projects/[id] - shows "Projects > Project Name"
    2. Visit /projects/[id]?section=epics - shows "Projects > Project Name > Epics"
    3. Click "Projects" in breadcrumb - navigates to /projects
    4. Click project name in breadcrumb (when section selected) - removes section param
  </verify>
  <done>
    - Project detail page shows breadcrumb trail
    - Breadcrumbs update based on current section
    - Navigation via breadcrumbs works correctly
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Breadcrumb component exists and is properly typed
- [ ] Project pages show breadcrumb trail
- [ ] Clicking breadcrumb links navigates correctly
- [ ] Other pages (runs list) still work with back button pattern
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Breadcrumbs provide clear location context
- Backward compatibility maintained for pages without breadcrumbs
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/10-navigation-layout/10-02-SUMMARY.md`
</output>
