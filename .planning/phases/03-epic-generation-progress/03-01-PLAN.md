---
phase: 03-epic-generation-progress
plan: 01
type: execute
---

<objective>
Add progress indicator to epic generation button so users see visual feedback during the AI grouping process.

Purpose: Replace static spinner with elapsed time counter and contextual status to eliminate "frozen UI" perception.
Output: Enhanced GenerateEpicsButton with elapsed time, animated indicator, and status text.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context (same pattern):
@.planning/phases/02-card-analysis-progress/02-01-SUMMARY.md

# Key files to modify:
@components/epics/generate-epics-button.tsx

# Pattern reference (elapsed time from Phase 2):
@components/analysis/run-progress-panel.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add elapsed time tracking and enhanced loading state to GenerateEpicsButton</name>
  <files>components/epics/generate-epics-button.tsx</files>
  <action>
Enhance the GenerateEpicsButton component to show progress during the synchronous AI call:

1. Add state for elapsed seconds: `const [elapsedSeconds, setElapsedSeconds] = useState(0)`

2. Add useEffect for elapsed time counter that runs when `loading` is true:
```typescript
useEffect(() => {
  if (!loading) {
    setElapsedSeconds(0);
    return;
  }
  const interval = setInterval(() => {
    setElapsedSeconds(s => s + 1);
  }, 1000);
  return () => clearInterval(interval);
}, [loading]);
```

3. Replace the simple loading spinner with a more informative display:
- When loading: Show animated Sparkles icon (like Phase 2's pulsing Zap)
- Show "Grouping cards..." or "Analyzing {cardCount} cards..." text
- Show elapsed time counter: "{elapsedSeconds}s"
- Use existing animate-pulse or add shimmer animation

4. Format elapsed time helper (can inline or extract):
```typescript
const formatElapsed = (seconds: number) => {
  if (seconds < 60) return `${seconds}s`;
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  return `${mins}:${secs.toString().padStart(2, '0')}`;
};
```

5. Update button content when loading to show:
- Left: Animated sparkles icon (use animate-pulse class)
- Center: "Grouping {cardCount} cards..."
- Right: Elapsed time in monospace font

DO NOT change the actual generateEpicsForProject call or add new API endpoints.
Keep the synchronous pattern - this is purely visual enhancement.
  </action>
  <verify>npm run build succeeds without TypeScript errors</verify>
  <done>
- GenerateEpicsButton shows elapsed time counter during AI processing
- Animated icon indicates active processing
- Text shows "Grouping X cards..." during loading
- Button returns to normal state after completion
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Enhanced epic generation button with elapsed time counter and animated progress indicator</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Navigate to a project with uploaded documents and analyzed cards
    3. Click "Generate Epics" button
    4. Observe during loading:
       - Button should show animated sparkles icon
       - Text should show "Grouping X cards..." (where X is card count)
       - Elapsed time counter should update every second (1s, 2s, 3s...)
    5. Wait for completion
    6. Verify button returns to normal "Generate Epics" or "Regenerate Epics" state
    7. Verify toast notification shows success with epic count
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] No TypeScript errors introduced
- [ ] Button shows elapsed time during processing
- [ ] Animation provides visual feedback that work is happening
- [ ] Existing functionality preserved (success/error handling, toast notifications)
</verification>

<success_criteria>

- Epic generation button shows progress indicator instead of static spinner
- Elapsed time counter updates every second during processing
- Visual animation (pulse/shimmer) indicates active work
- No changes to backend logic (frontend-only enhancement)
- Consistent with Phase 2 patterns
  </success_criteria>

<output>
After completion, create `.planning/phases/03-epic-generation-progress/03-01-SUMMARY.md`:

# Phase 3 Plan 1: Epic Generation Progress Summary

**[One-liner describing what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `components/epics/generate-epics-button.tsx` - Added elapsed time tracking and enhanced loading state

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 3 complete. Ready for Phase 4 (Story Generation Timeout Fix).
</output>
