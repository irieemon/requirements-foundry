---
phase: 10.2-kpi-and-subtask-ux
plan: 01
type: execute
---

<objective>
Fix KPI card row layout and improve subtask generation UX clarity.

Purpose: The 6 KPI cards currently stack into 2 rows, looking cramped. The subtask generation section says "generate from epics" but users can't find the button. These UX issues confuse users.
Output: KPIs fit neatly in one row (responsive), subtask generation section has clear, prominent action button.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Current issues:**
1. KpiStrip uses `lg:grid-cols-4` but has 6 cards → wraps to 2 rows on large screens
2. SubtasksSection empty state says "Generate subtasks from stories in the Epics section" - unclear what to do
3. SubtaskGenerationSection is only visible in epic detail page, not from the main subtasks section

**Key files:**
@components/ui/kpi-card.tsx
@components/subtasks/subtasks-section.tsx
@components/subtasks/subtask-generation-section.tsx
@app/projects/[id]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix KPI cards to fit in one responsive row</name>
  <files>components/ui/kpi-card.tsx</files>
  <action>
Update KpiStrip grid classes to support 6 columns on larger screens:
- `sm:grid-cols-2` (2 columns on small)
- `md:grid-cols-3` (3 columns on medium)
- `lg:grid-cols-6` (6 columns on large - all cards in one row)

Also consider:
- Reduce gap on larger screens if cards feel too spaced
- Make card padding slightly tighter with `p-4` instead of `p-5` to fit better

The KpiCard component itself may need slight adjustments:
- Text can stay same size, but icon container could be slightly smaller on dense layouts
  </action>
  <verify>View project page at various screen widths: 1440px+ shows all 6 KPIs in one row, 1024px shows 3 columns × 2 rows, 768px shows 2 columns × 3 rows</verify>
  <done>KPI cards display in single row on desktop (≥1280px), responsive stacking on smaller screens</done>
</task>

<task type="auto">
  <name>Task 2: Add "Generate Subtasks" button to SubtasksSection</name>
  <files>components/subtasks/subtasks-section.tsx, app/projects/[id]/page.tsx</files>
  <action>
Make subtask generation accessible from the Subtasks section directly:

1. In `subtasks-section.tsx`:
   - Add `projectId` prop
   - Add a SubtaskGenerationSection or a global "Generate All" button at top of section
   - Change empty state to include a clear CTA button, not just text

2. In `app/projects/[id]/page.tsx`:
   - Pass `projectId` to SubtasksSection
   - Ensure epics with stories are passed correctly for generation

3. The button should:
   - Be prominent (primary variant)
   - Say "Generate Subtasks" with ListTodo icon
   - Open configuration dialog showing ALL stories across ALL epics
   - Let user select which stories to process

The SubtaskConfigDialog already works with epicId, but we need a variant that works across all epics for a project-wide generation.
  </action>
  <verify>
1. Navigate to Subtasks section
2. Empty state shows clear "Generate Subtasks" button
3. When stories exist, a "Generate Subtasks" button is visible in header
4. Clicking button opens config dialog with all stories from all epics
  </verify>
  <done>SubtasksSection has clear, prominent subtask generation button that works across all epics</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>KPI row layout and subtask generation UX improvements</what-built>
  <how-to-verify>
    1. Run: npm run dev (if not running)
    2. Visit: http://localhost:3000/projects/{your-project-id}
    3. Desktop (≥1280px): Verify all 6 KPI cards fit in ONE row
    4. Click "Subtasks" in KPI strip
    5. Verify "Generate Subtasks" button is visible and clear
    6. Click button - verify dialog opens with story selection
    7. Resize to tablet (768px): Verify KPIs reflow to 2×3 or 3×2 grid
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] KPI cards display 6-in-a-row on screens ≥1280px
- [ ] KPI cards responsively reflow on smaller screens
- [ ] Subtasks section has clear "Generate Subtasks" button
- [ ] Button opens working configuration dialog
- [ ] `npm run build` succeeds without errors
</verification>

<success_criteria>

- All tasks completed
- KPI layout is responsive and fits 6 cards in one row on desktop
- Subtask generation is discoverable without navigating to epic details
- No console errors or TypeScript issues
</success_criteria>

<output>
After completion, create `.planning/phases/10.2-kpi-and-subtask-ux/10.2-01-SUMMARY.md`:

# Phase 10.2 Plan 01: KPI & Subtask UX Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase complete, ready for next phase
</output>
