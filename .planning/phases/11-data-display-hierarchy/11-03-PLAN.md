---
phase: 11-data-display-hierarchy
plan: 03
type: execute
---

<objective>
Polish subtask display with card-based layout and clearer hierarchy indicators.

Purpose: Subtasks are the deepest level. Converting to cards and adding visual hierarchy indicators (story context) completes the visual redesign.
Output: SubtaskCard component with parent story context, consistent styling with stories/epics.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-data-display-hierarchy/11-02-SUMMARY.md (after Plan 02)
@components/subtasks/subtask-table.tsx
@components/subtasks/subtasks-section.tsx

**Current state:**
- Subtasks displayed in tables within story groups
- Expandable rows show description
- 3-level nesting: epic card > story divider > subtask table

**Design direction:**
- Replace subtask tables with compact cards
- Simpler than story cards (subtasks have less metadata)
- Story header row cleaner (badge + title, no separator line)
- Effort badge as primary metadata
- Optional expandable description
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SubtaskCard component</name>
  <files>components/subtasks/subtask-card.tsx</files>
  <action>
Create compact SubtaskCard component:

1. Structure - much simpler than StoryCard:
   - Single row layout: Code badge | Title | Effort badge
   - If description exists, allow expand/collapse
   - If no description, card is not expandable (static display)

2. Layout:
   ```tsx
   <div className="flex items-center gap-3 py-2 px-3 rounded-md border border-border/40 bg-card hover:bg-muted/30">
     <Badge variant="outline" className="text-xs shrink-0">{code}</Badge>
     <span className="flex-1 text-sm truncate">{title}</span>
     {effort && <Badge variant="secondary" className="text-xs">{effort}</Badge>}
     {description && <ChevronDown className="h-4 w-4 text-muted-foreground" />}
   </div>
   ```

3. Expandable description (only if description exists):
   - Use Collapsible component
   - Expanded: `<div className="px-3 py-2 text-sm text-muted-foreground bg-muted/20 rounded-b-md">`

4. No hover shadow (too heavy for this density) - just bg change

Props:
```typescript
interface SubtaskCardProps {
  subtask: {
    id: string;
    code: string;
    title: string;
    description: string | null;
    effort: string | null;
  };
}
```
  </action>
  <verify>`npx tsc --noEmit` passes</verify>
  <done>SubtaskCard component exists with compact layout and optional expandable description</done>
</task>

<task type="auto">
  <name>Task 2: Update SubtasksSection to use SubtaskCard</name>
  <files>components/subtasks/subtasks-section.tsx</files>
  <action>
1. Import SubtaskCard component
2. Replace `<SubtaskTable subtasks={story.subtasks} />` with:
   ```tsx
   <div className="space-y-2">
     {story.subtasks.map(subtask => (
       <SubtaskCard key={subtask.id} subtask={subtask} />
     ))}
   </div>
   ```

3. Clean up story header row (currently has border-b which is heavy):
   - Change from border-b to just font-medium with code badge
   - Structure:
   ```tsx
   <div className="flex items-center gap-2 mb-3">
     <Badge variant="secondary" className="text-xs">{story.code}</Badge>
     <span className="text-sm font-medium">{story.title}</span>
     <span className="ml-auto text-xs text-muted-foreground">
       {story.subtasks.length} subtasks
     </span>
   </div>
   ```

4. Keep epic grouping card structure unchanged (matches stories section)

5. Keep empty state and progress display unchanged
  </action>
  <verify>`npm run build` succeeds</verify>
  <done>SubtasksSection displays subtasks as compact cards instead of tables</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Card-based subtask display completing visual hierarchy redesign</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Navigate to a project with subtasks
    3. Click "Subtasks" in KPI strip
    4. Verify:
       - Subtasks appear as compact horizontal cards (not table rows)
       - Each card shows code badge, title, effort (if present)
       - Cards with descriptions expand on click
       - Story headers are clean (code + title + count)
       - Epic grouping maintained
    5. Compare visual consistency:
       - Epics: Grid of cards with prominent story counts
       - Stories: Stacked expandable cards with subtask counts
       - Subtasks: Compact row-style cards within story groups
    6. Overall: Hierarchy is clear through visual weight (epics > stories > subtasks)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] Subtask cards render correctly within story groups
- [ ] Description expand/collapse works (when applicable)
- [ ] Visual hierarchy clear across epic → story → subtask
- [ ] No console errors
</verification>

<success_criteria>

- Subtasks display as compact cards instead of table rows
- Cards with descriptions are expandable
- Story headers are cleaner (no heavy borders)
- Visual weight decreases appropriately: epic > story > subtask
- Consistent design language across all three levels
</success_criteria>

<output>
After completion, create `.planning/phases/11-data-display-hierarchy/11-03-SUMMARY.md`:

# Phase 11 Plan 03: Subtask Display Polish Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 11 complete. Ready for Phase 12 (JIRA Export Preview).
</output>
