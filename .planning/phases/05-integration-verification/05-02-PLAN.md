---
phase: 05-integration-verification
plan: 02
type: execute
---

<objective>
Verify story generation, stories page, and subtask generation flows work end-to-end on production.

Purpose: Confirm Phase 4, 6, and 7 features work correctly in the deployed Vercel environment.
Output: Fully verified generative pipeline, updated roadmap checklist, phase complete.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior verification results:
@.planning/phases/05-integration-verification/05-01-SUMMARY.md

# Features being verified:
@.planning/phases/04-story-generation-timeout/04-01-SUMMARY.md
@.planning/phases/06-stories-page/06-01-SUMMARY.md
@.planning/phases/07-subtask-generation/07-05-SUMMARY.md

# Key constraint from STATE.md:
**Remote testing only**: User can only test on Vercel production, not locally.
**Vercel 300s timeout**: Must complete within function timeout.

# What was fixed/added:
- 04-01: Self-continuation on timeout + fire-and-confirm trigger pattern for story generation
- 06-01: Stories section on project page with KPI card, grouped by epic
- 07-01 through 07-05: Full subtask generation pipeline (schema, actions, executor, UI)
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Story generation flow with timeout fix (Phase 4 fix)</what-built>
  <how-to-verify>
**Test: Generate stories from epics and observe completion**

1. Navigate to project with generated epics
2. Open story generation wizard/dialog
3. Select epics to generate stories for
4. Start generation
5. **Observe the progress:**
   - Does progress indicator show which epic is being processed?
   - Does modal stay open (not reset unexpectedly)?
   - If generation takes >60s, does it continue smoothly?
6. Wait for completion (may take several minutes for many epics)
7. Confirm stories are created

**Expected behavior:**
- Progress visible throughout generation
- No modal resets or silent failures
- Stories appear when complete
- Handles continuation across Vercel timeout boundary (if applicable)

**Note:** For thorough testing, use enough epics that generation might hit the 280s self-continuation threshold.
  </how-to-verify>
  <resume-signal>Type "pass" if working correctly, or describe specific issues observed</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Stories page display (Phase 6 feature)</what-built>
  <how-to-verify>
**Test: View stories section on project page**

1. Navigate to project with generated stories
2. Find the Stories section (may need to scroll or use navigation)
3. **Verify:**
   - Is there a Stories KPI card showing total count?
   - Does clicking the KPI card navigate to stories section?
   - Are stories displayed grouped by their parent epic?
   - Does each epic group show its stories in a table?
   - Can you expand story rows to see details?
4. Check empty state: View a project without stories - is the empty state clear?

**Expected behavior:**
- KPI card shows accurate story count
- Stories grouped by epic with clear headers
- Expandable rows reveal story details (acceptance criteria, technical notes)
- Clean empty state when no stories exist
  </how-to-verify>
  <resume-signal>Type "pass" if working correctly, or describe specific issues observed</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Subtask generation flow (Phase 7 feature)</what-built>
  <how-to-verify>
**Test: Generate subtasks from stories**

1. Navigate to an epic detail page (click on an epic)
2. Find the subtask generation section (after stories table)
3. Open the subtask configuration dialog
4. Select stories to generate subtasks for
5. Configure generation options (mode, etc.)
6. Start generation
7. **Observe:**
   - Does progress display show which story is being processed?
   - Does per-story status update correctly?
   - Does completion indicate success?
8. After completion, verify subtasks were created
9. Check that subtask counts appear in story selection for subsequent runs

**Expected behavior:**
- Config dialog allows story selection and mode choice
- Progress updates in real-time during generation
- Subtasks created for selected stories
- UI reflects new subtask counts
  </how-to-verify>
  <resume-signal>Type "pass" if working correctly, or describe specific issues observed</resume-signal>
</task>

<task type="auto">
  <name>Task 4: Update roadmap checklist and documentation</name>
  <files>.planning/ROADMAP.md, .planning/STATE.md</files>
  <action>
Based on verification results, update the Phase 5 checklist in ROADMAP.md:

Change:
```markdown
Verification checklist:
- [ ] Card analysis: Progress updates visible, completes successfully
- [ ] Epic generation: Progress indicator visible, completes successfully
- [ ] Story generation: Progress visible, no timeouts, stories created
```

To checked items (assuming all passed):
```markdown
Verification checklist:
- [x] Card analysis: Progress updates visible, completes successfully
- [x] Epic generation: Progress indicator visible, completes successfully
- [x] Story generation: Progress visible, no timeouts, stories created
```

Add additional verified items for Phase 6-7:
```markdown
- [x] Stories page: Stories displayed grouped by epic with KPI card
- [x] Subtask generation: Progress visible, subtasks created successfully
```

Update Phase 5 status to Complete with date.

Update STATE.md:
- Current position: Phase 5 complete
- Update session continuity
  </action>
  <verify>ROADMAP.md shows Phase 5 checklist items checked, STATE.md updated</verify>
  <done>Documentation reflects verified state</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Story generation completes without timeout/reset
- [ ] Stories page displays correctly with grouping
- [ ] Subtask generation works end-to-end
- [ ] ROADMAP.md checklist updated
- [ ] STATE.md reflects completion
</verification>

<success_criteria>

- Story generation works without timeouts or modal resets
- Stories page shows stories grouped by epic with accurate counts
- Subtask generation completes successfully with progress feedback
- All roadmap checklist items verified and marked complete
- Phase 5 marked complete in documentation
</success_criteria>

<output>
After completion, create `.planning/phases/05-integration-verification/05-02-SUMMARY.md`:

# Phase 5 Plan 2: Advanced Flow Verification Summary

**[All generative flows verified working on production]**

## Verification Results

| Flow | Status | Notes |
|------|--------|-------|
| Story Generation | [pass/fail] | [observations] |
| Stories Page | [pass/fail] | [observations] |
| Subtask Generation | [pass/fail] | [observations] |

## Issues Found

[Any issues discovered, or "None"]

## Phase 5 Complete

All verification items passed. The generative pipeline is fully functional:
- Card analysis with real-time progress ✓
- Epic generation with elapsed time ✓
- Story generation with timeout handling ✓
- Stories display page ✓
- Subtask generation ✓

## Next Step

Phase 5 complete. Project milestone complete - all phases verified.
</output>
